<!DOCTYPE html>
<html>

<head>
    <title>HTML Register Form</title>
    <link rel="stylesheet" href="loginPage.css">
</head>

<body>
    <div class="main">
        <h1>GeeksforGeeks</h1>
        <h3>Register Now!!!</h3>
        <form id="registerForm">
            <label for="email">
                Email:
            </label>
            <input type="email" 
                   id="email" 
                   name="email" 
                   placeholder="Enter your Email" required>

            <label for="password">
                Password:
            </label>
            <input type="password"
                   id="password" 
                   name="password"
                   placeholder="Enter your Password" required>

            <div class="wrap">
                <button type="submit">
                    Submit
                </button>
            </div>
        </form>
        <p>Already registered?
            <a href="loginPage.html" style="text-decoration: none;">
                Login here
            </a>
        </p>
    </div>

    <!-- Firebase JavaScript SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            databaseURL: "YOUR_DATABASE_URL",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const auth = firebase.auth();

        document.addEventListener('DOMContentLoaded', () => {
            const registerForm = document.getElementById('registerForm');

            registerForm.addEventListener('submit', (evt) => {
                evt.preventDefault();
                register();
            });
        });

        function register() {
            let email = document.getElementById('email').value;
            let password = document.getElementById('password').value;

            firebase.auth().createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    let user = userCredential.user;
                    let userRef = db.ref('users/' + user.uid);

                    userRef.set({
                        email: email,
                        registration_date: new Date().toISOString()
                    }).then(() => {
                        alert('Account successfully created!');
                        window.location.href = 'loginPage.html'; // Redirect to login page after successful registration
                    }).catch((error) => {
                        console.error("Error setting user data:", error);
                        alert("Error setting user data: " + error.message);
                    });
                })
                .catch((error) => {
                    console.error("Error creating user:", error);
                    alert("Error creating user: " + error.message);
                });
        }
    </script>
</body>

</html>
