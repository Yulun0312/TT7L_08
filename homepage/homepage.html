<header>
    <link rel="stylesheet" href="homepage.css">
    
    <nav>
        <a href="homepage.html" class="brand">Audi R8</a>
    <ul class="menu">
        <li><a href="#">Home</a></li>
        <li><a href="#">Garage</a></li>
        <li><a href="#">News</a></li>
        <li><a href="purchasePage.html" class="btn">Purchase</a></li>
    </ul>



    <div class="menu-btn">
        <i class="fas fa-bars"></i>
    </div>
    </nav>
    <div class="header body">
    <div>
        <h1>Join The Journey</h1>
        <p>
            Leaner and meaner then ever. The new Audi R8 boddly goes where no car has gone before
        </p>
        </div>
</header>

<section class="about">
    <div class="heading">
        <h2>
            Take the journey, <br />
            bend space
        </h2>
        <p>
            The R8 can't help but steal the spotlight. With its sharp angular lines and exotic, glass covered engine, the R8 has a wide and commanding pressece that makes its impossible to look anywhere else.
        </p>
    </div>
    <div class="infos">
        <div class="info">
            <img src="img/icon1.png" alt="icon" />
            <div>
                <h3>Agility</h3>
                <p>
                    Built for speed, with a 5.2 liter V10 engine
                </p>
            </div>
        </div>
    </div>
    <div class="info">
        <img src="img/icon2.png" alt="icon" />
        <div>
            <h3>Performance</h3>
            <p>
                Accelerating from zero to 60 mph in 3.2s
            </p>
        </div>
    </div>
    <div class="info">
        <img src="img/icon3.png" alt="icon" />
        <div>
            <h3>Cutting Edge</h3>
            <p>
                Sharing half of its parts with the R8 LMS racecar
            </p>
        </div>
    </div>
</section>

<section class="specification">
    <div class="specs-header">
        <h2>Tech Specs</h2>
        <span>Engine</span>
    </div>
    <li>
        <span>Engine displacement</span>
        <span>5204</span>
    </li>
    <li>
        <span>Maximum power</span>
        <span>601.4 bhp @ 8250 rpm</span> 
    </li>
    <li>
        <span>Maximum torque</span>
        <span>560 Nm @ 6500 rpm</span>
    </li>
    <li>
        <span>Turning radius</span>
        <span>5.9 m</span>
    </li>
    <li>
        <span>No. of cylinders</span>
        <span>10</span>
    </li>
    <li>
        <span>Drivetrain</span>
        <span>AWD</span>
    </li>
    <li>
        <span>Turbo Charger</span>
        <span>No</span>
    </li>
    <li>
        <span>Super Charger</span>
        <span>Yes</span>
    </li>
    <li>
        <span>Fuel Supply</span>
        <span>Direct Injection</span>
    </li>
</ul>
</div>
</section>

<section class="panels">
    <div class="panels-sm">
        <div class="panel">
            <div class="icon">
                <i class="fas fa-fire"></i>
            </div>
            <h2>Power and speed unleashed</h2>
            <a href="#">
                <span>Learn More</span>
                <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>
    <div class="panel"></div>
    <div class="panel"></div>
    <div class="panel">
        <div>
            <div class="icon">
                <i class="fas fa-tint"></i>
            </div>
            <h2>Respectful to environment</h2>
        </div>
    </div>
</div>
<div class="panel-lg"></div>
</section>

<section class="car-stats">
    <div class="stats">
        <div>
            <h1
            class="counter"
            data-target="206"
            data-speed="10"
            >0
        </h1>
        <h1>kmph</h1>
        <h5>Top Speed</h5>
        </div>
        <div>
            <h1
            class="counter"
            data-target="7"
            data-speed="500"
            >0
        </h1>
        <h1>gears</h1>
        <h5>Gear Box</h5>
        </div>
        <div>
            <h1
            class="counter"
            data-target="473"
            data-speed="1"
            >0
        </h1>
        <h1>hp</h1>
        <h5>Horse Power</h5>
        </div>
    </div>
    <div class="car">
        <div class="circle">
            <img src="img/car.png" alt="car" />
            <div class="inner-md-circle"></div>
            <div class="inner-sm-circle"></div>
        </div>
    </div>
    <script src="homepage.js"></script>
    <link rel="stylesheet" href="homepage.css">
</section>


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comment Box</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #161616;
        }
        .comment-box, .login-form-container, .register-form-container, .comments-display {
            max-width: 600px;
            margin: 0 auto;
            padding: 10px;
            border: 1px solid #ffffff;
            border-radius: 5px;
            background-color: #ffffff;
            margin-top: 20px;
        }
        .comment-box input[type="text"], .comment-box textarea, .login-form-container input[type="email"], .login-form-container input[type="password"], .register-form-container input[type="email"], .register-form-container input[type="password"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #333;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .comment-box button, .login-form-container button, .register-form-container button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background-color: #007BFF;
            color: white;
            cursor: pointer;
        }
        .comment-box button:hover, .login-form-container button:hover, .register-form-container button:hover {
            background-color: #0056b3;
        }
        .comments-display h2, .login-form-container h3, .register-form-container h3 {
            margin-top: 0;
            color: #333;
            border-bottom: 2px solid #007BFF;
            padding-bottom: 5px;
        }
        .login-form-container p a {
            color: #4285F4;
        }
        #showRegisterForm {
            color: #4285F4;
        }
        .login-form-container p{
            color: black;
        }
        .login-form-container p a {
            color: #4285F4; 
        }
        #showRegisterForm {
            color: #4285F4;
        }
        #showLoginForm {
            color: #4285F4;
        }
        .register-form-container p {
            color: black;
        }
        .comment {
            border-bottom: 1px solid #ddd;
            padding: 10px 0;
        }
        .comment:last-child {
            border-bottom: none;
        }
        .comment strong {
            color: #007BFF;
        }
        .comment p {
            margin: 5px 0;
            color: #555;
        }
        .register-form-container {
            display: none; /* Hide the registration form by default */
        }
    </style>
</head>
<body>

<!-- Login form -->
<div class="login-form-container" id="loginFormContainer">
    <form id="loginForm">
        <h3>User Login</h3>
        <input id="loginEmail" type="email" placeholder="Email" class="box" required>
        <input id="loginPassword" type="password" placeholder="Password" class="box" required>
        <p>Forget your password <a href="#">click here</a></p>
        <button type="submit" class="btn">Login Now</button>
        <p>Don't have an account <a href="#" id="showRegisterForm">Create One</a></p>
    </form>
</div>

<!-- Register form -->
<div class="register-form-container" id="registerFormContainer">
    <form id="registerForm">
        <h3>User Registration</h3>
        <input id="registerEmail" type="email" placeholder="Email" class="box" required>
        <input id="registerPassword" type="password" placeholder="Password" class="box" required>
        <button type="submit" class="btn">Register Now</button>
        <p>Already have an account <a href="#" id="showLoginForm">Login Here</a></p>
    </form>
</div>

<div class="comments-display" id="commentsDisplay">
    <h2>Comments</h2>
    <!-- Comments will be displayed here -->
</div>

<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, set, onValue, get } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyC7FWt5lhKF3Omc4deXzUxGUYxUkz_XSG4",
        authDomain: "car-review-website.firebaseapp.com",
        databaseURL: "https://car-review-website-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "car-review-website",
        storageBucket: "car-review-website.appspot.com",
        messagingSenderId: "320459252993",
        appId: "1:320459252993:web:49670ccd2505873cdae700"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);


    let loggedInUser = null;

    // Show register form
    document.getElementById('showRegisterForm').addEventListener('click', function(e) {
        e.preventDefault();
        document.getElementById('loginFormContainer').style.display = 'none';
        document.getElementById('registerFormContainer').style.display = 'block';
    });

    // Show login form
    document.getElementById('showLoginForm').addEventListener('click', function(e) {
        e.preventDefault();
        document.getElementById('registerFormContainer').style.display = 'none';
        document.getElementById('loginFormContainer').style.display = 'block';
    });

    // Handle registration form submission
    document.getElementById('registerForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const email = document.getElementById('registerEmail').value;
        const password = document.getElementById('registerPassword').value;

        // Save the user details to the database (simulate registration)
        const userId = Date.now().toString();
        set(ref(database, 'users/' + userId), {
            email: email,
            password: password
        }).then(() => {
            alert('Registration successful! Please log in.');
            document.getElementById('registerFormContainer').style.display = 'none';
            document.getElementById('loginFormContainer').style.display = 'block';
        }).catch((error) => {
            alert('Error registering user: ' + error);
        });
    });

    // Handle login form submission
    document.getElementById('loginForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;

        // Simulate login by checking user details in the database
        get(ref(database, 'users')).then((snapshot) => {
            const users = snapshot.val();
            let userFound = false;
            for (const userId in users) {
                const user = users[userId];
                if (user.email === email && user.password === password) {
                    loggedInUser = email.split('@')[0]; // Use email prefix as username
                    document.getElementById('loginFormContainer').style.display = 'none';
                    document.getElementById('commentBox').style.display = 'block';
                    alert('Login successful!');
                    userFound = true;
                    break;
                }
            }
            if (!userFound) {
                alert('Invalid email or password.');
            }
        }).catch((error) => {
            alert('Error logging in: ' + error);
        });
    });

    // Handle comment form submission
    document.getElementById('commentForm').addEventListener('submit', function(e) {
        e.preventDefault();

        if (!loggedInUser) {
            alert('You must be logged in to comment.');
            return;
        }

        const comment = document.getElementById('comment').value;
        const commentId = Date.now().toString();

        // Save the comment to the database
        set(ref(database, 'comments/' + commentId), {
            username: loggedInUser,
            comment: comment
        }).then(() => {
            alert('Comment submitted successfully!');
            document.getElementById('commentForm').reset();
            fetchComments(); // Fetch comments to update the display
        }).catch((error) => {
            alert('Error submitting comment: ' + error);
        });
    });

    // Function to fetch and display comments
    function fetchComments() {
        const commentsRef = ref(database, 'comments/');
        onValue(commentsRef, (snapshot) => {
            const commentsDisplay = document.getElementById('commentsDisplay');
            commentsDisplay.innerHTML = '<h2>Comments</h2>'; // Clear previous comments and add title
            const comments = snapshot.val();
            for (const id in comments) {
                const commentData = comments[id];
                const commentElement = document.createElement('div');
                commentElement.className = 'comment';
                commentElement.innerHTML = `<strong>${commentData.username}</strong><p>${commentData.comment}</p>`;
                commentsDisplay.appendChild(commentElement);
            }
        });
    }

    // Fetch and display comments when the page loads
    fetchComments();
</script>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, set, update } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";
    import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyC7FWt5lhKF3Omc4deXzUxGUYxUkz_XSG4",
        authDomain: "car-review-website.firebaseapp.com",
        databaseURL: "https://car-review-website-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "car-review-website",
        storageBucket: "car-review-website.appspot.com",
        messagingSenderId: "320459252993",
        appId: "1:320459252993:web:49670ccd2505873cdae700"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const auth = getAuth(app);

    document.addEventListener('DOMContentLoaded', () => {
        const loginForm = document.getElementById('loginForm');

        loginForm.addEventListener('submit', (evt) => {
            evt.preventDefault();
            login();
        });

        document.getElementById('registerButton').addEventListener('click', (evt) => {
            evt.preventDefault();
            register();
        });

        document.getElemntById('close-login-form').addEventListner('click', () => {
            hideLoginForm();
        });
    });


      

    function login() {
        let email = document.getElementById('email').value;
        let password = document.getElementById('password').value;

        if (!validate_email(email) || !validate_password(password)) {
            alert('Email or Password is Incorrect!!');
            return;
        }

        signInWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
                let user = userCredential.user;
                let userRef = ref(db, 'users/' + user.uid);

                update(userRef, { last_login: Date.now() })
                    .then(() => {
                        alert('User Logged In!!');
                        window.location.assign('PurchasePage.html');
                    });
            })
            .catch((error) => {
                alert(error.message);
            });
    }

    function hideLoginForm() {
        const loginFormContainer = document.getElementById('login-form-container');
        loginFormContainer.style.display = 'none';
    }

    function validate_email(email) {
        const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return regex.test(email);
    }

    function validate_password(password) {
        return password.length >= 6; // or any other password validation logic
    }

    function register() {
        let email = document.getElementById('email').value;
        let password = document.getElementById('password').value;

        createUserWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
                let user = userCredential.user;
                let userRef = ref(db, 'users/' + user.uid);

                set(userRef, {
                    email: email,
                    last_login: Date.now()
                }).then(() => {
                    alert('Account successfully created!');
                });
            })
            .catch((error) => {
                alert(error.message);
            });
    }

</script>


</body>
</html>